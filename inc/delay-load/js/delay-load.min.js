"use strict";(()=>{document.body.getBoundingClientRect().top;var e=!0;window.localStorage.getItem("debloat_user")?e=!1:(window.localStorage.setItem("debloat_user","debloat_user"),e=!0);const t=window.debloatConfig||{},n=!0;let o=[];const a={HTMLDocument:document.addEventListener.bind(document),Window:window.addEventListener.bind(window)},d={};let c,s=!1,r=!1,i=!1,l=!1,u=!1,m=[],f=[];function h(e){m=[...document.querySelectorAll("script[data-debloat-delay]")],m.length&&(!function(){if(s)return;s=!0;const e=(e,t)=>{t.addEventListener(e,(t=>d[e]=t))};e("DOMContentLoaded",document),e("load",window),e("readystatechange",document),e("pageshow",window);const t=function(e,t,...d){if(i&&!r&&["readystatechange","DOMContentLoaded","load","pageshow"].includes(e)){n&&console.log("Adding: ",e,t,d);const a={event:e,cb:t,context:this,args:d};o.push(a)}else a[this.constructor.name]&&a[this.constructor.name].call(this,e,t,...d)};document.addEventListener=t.bind(document),window.addEventListener=t.bind(window),Object.defineProperty(window,"onload",{set(e){window.addEventListener("load",e)}})}(),w("js",e))}function y(e){f=[...document.querySelectorAll("link[data-debloat-delay]")],f.length&&w("css",e)}function w(e,n){e=e||"js";const o=n?"onload":t[e+"DelayType"]||"onload",a="js"===e?b:g;switch("js"===e&&(n||"onload"===o?p():j(p)),o){case"onload":j((()=>a(n)));break;case"interact":let o=!1;const d=()=>{o||(o=!0,"js"===e?S((()=>setTimeout(a,2))):a())};["mousemove","mousedown","keydown","touchstart","wheel"].forEach((e=>{document.addEventListener(e,d,{passive:!0,once:!0})})),"js"===e&&t.jsDelayMax&&S((()=>setTimeout(d,1e3*t.jsDelayMax)));break;case"custom-delay":j((()=>{const e=1e3*parseInt(element.dataset.customDelay);setTimeout(a,e)}))}}function g(){f.forEach((e=>v(e)))}function b(e){if(p(),!e){i=!0,c=document.readyState;let e="loading";Object.defineProperty(document,"readyState",{configurable:!0,get:()=>e,set:t=>e=t})}let t;const n=new Promise((e=>t=e)),a=()=>{if(!m.length)return void t();v(m.shift()).then(a)};a(),n.then(L).catch((e=>{console.error(e),L()})),setTimeout((()=>!o.length||L()),45e3)}function p(e){u||(u=!0,m.forEach((t=>{const n=t.src||t.dataset.src;if(!n)return;const o=document.createElement("link");Object.assign(o,{rel:e||"preload",as:"script",href:n,...t.crossOrigin&&{crossOrigin:t.crossOrigin}}),document.head.append(o)})))}function v(e){let t;const n=e.dataset.src,o=e=>new Promise((t=>{e.addEventListener("load",t),e.addEventListener("error",t)}));if(n){const a=document.createElement("script");t=o(a),e.getAttributeNames().forEach((t=>{"src"===t||(a[t]=e[t])})),a.async=!1,a.src=n,e.parentNode.replaceChild(a,e)}else e.type&&"text/debloat-script"===e.type&&(e.type=e.dataset.type||"text/javascript",e.text+=" ");const a=e.dataset.href;return a&&(t=o(e),e.href=a),["debloatDelay","src"].forEach((t=>{e.dataset[t]="",delete e.dataset[t]})),t||Promise.resolve()}function E(e){try{e.cb.call(e.context,d[e.event],...e.args)}catch(e){console.error(e)}}function L(){if(l)return;n&&console.log("Firing Load Events",o),l=!0;const e=o.filter((e=>"readystatechange"===e.event));document.readyState="interactive",e.forEach((e=>E(e)));for(const e of o)"DOMContentLoaded"===e.event&&E(e);for(const e of o)"load"===e.event&&E(e);o=[],l=!1,r=!0,i=!1,j((()=>{document.readyState="complete",setTimeout((()=>{e.forEach((e=>E(e)))}),2)}))}function j(e){"complete"===(c||document.readyState)?e():a.Window("load",(()=>e()))}function S(e){"loading"!==document.readyState?e():a.Window("DOMContentLoaded",(()=>e()))}!function(){if(e)h(),y();else{const e=[...document.querySelectorAll("script[data-debloat-delay]")],t=[...document.querySelectorAll("link[data-debloat-delay]")];e.forEach((e=>v(e))),t.forEach((e=>v(e)))}document.addEventListener("debloat-load-css",(()=>y(!0))),document.addEventListener("debloat-load-js",(()=>h(!0)))}()})();